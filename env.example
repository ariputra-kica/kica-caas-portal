# ============================================
# KICA CaaS Portal - Environment Variables
# ============================================
# Copy this file to .env.local and fill in your values
# NEVER commit .env.local to Git!

# ============================================
# Supabase Configuration
# ============================================
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# ============================================
# Sectigo API Configuration
# ============================================
# CaaS API (ACME Account & Domain Management)
SECTIGO_CAAS_API_URL=https://secure.trust-provider.com/products/!ACMEAdmin

# Legacy API (Balance Check & Order Status - Future)
SECTIGO_LEGACY_API_URL=https://hard.cert-manager.com/private/ws

# API Credentials (NEVER share these!)
# Get these from your Sectigo Partner Portal
SECTIGO_LOGIN_NAME=your_login_name
SECTIGO_LOGIN_PASSWORD=your_password

# ============================================
# Mock Mode Toggle
# ============================================
# Controls whether to use real Sectigo API or simulated responses
#
# DEVELOPMENT MODE (Mock = true):
#   - No real API calls to Sectigo
#   - No API charges
#   - Returns simulated success responses
#   - ACME Account IDs will have "MOCK_" prefix
#   - Order numbers will be 1000000-9999999 range
#   - Perfect for UI/UX testing
#
# PRODUCTION MODE (Mock = false):
#   - Makes REAL API calls to Sectigo
#   - API charges will apply
#   - Requires valid SECTIGO_LOGIN_NAME and SECTIGO_LOGIN_PASSWORD
#   - Returns actual data from Sectigo
#   - Use for CEO demo and production deployment
#
# Set to 'true' for development/testing without real API calls
# Set to 'false' for production and CEO demo
ENABLE_SECTIGO_MOCK=true

# ============================================
# Application Settings
# ============================================
# Base URL for the application (used in emails, links)
# Local: http://localhost:3000
# Staging: https://kica-caas-staging.vercel.app
# Production: https://your-production-domain.com
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ============================================
# Troubleshooting Guide
# ============================================
#
# PROBLEM: "SECTIGO_LOGIN_NAME and SECTIGO_LOGIN_PASSWORD must be set"
# SOLUTION: 
#   1. Make sure ENABLE_SECTIGO_MOCK=false is set
#   2. Add your Sectigo credentials above
#   3. Restart the dev server (npm run dev)
#
# PROBLEM: "403 Forbidden" errors in API calls
# SOLUTION:
#   - Check credentials are correct
#   - Verify your Sectigo account has CaaS API access
#   - Check if domain already exists (this is OK, treated as success)
#
# PROBLEM: "429 Rate Limit Exceeded"
# SOLUTION:
#   - This is normal, the system will auto-retry with backoff
#   - Wait a few seconds between requests
#   - Consider implementing request queuing for bulk operations
#
# PROBLEM: Seeing "MOCK_" prefixes in ACME Account IDs
# SOLUTION:
#   - Mock mode is still enabled
#   - Set ENABLE_SECTIGO_MOCK=false
#   - Restart the application
#
# PROBLEM: Order numbers in 1000000-9999999 range
# SOLUTION:
#   - These are mock order numbers
#   - Set ENABLE_SECTIGO_MOCK=false for real order numbers
#   - Clean up mock data using supabase/migrations/cleanup_mock_data.sql
#
# ============================================
# Deployment Checklist (Vercel)
# ============================================
#
# FOR STAGING ENVIRONMENT:
# 1. Go to Vercel Dashboard → Your Project → Settings
# 2. Click "Environment Variables"
# 3. Add variables for "Preview" environment:
#    - SECTIGO_CAAS_API_URL
#    - SECTIGO_LOGIN_NAME
#    - SECTIGO_LOGIN_PASSWORD
#    - ENABLE_SECTIGO_MOCK=false
#    - NEXT_PUBLIC_APP_URL (staging URL)
# 4. Redeploy
#
# FOR PRODUCTION ENVIRONMENT:
# 1. Same as staging, but select "Production" environment
# 2. Use production Sectigo credentials
# 3. Set NEXT_PUBLIC_APP_URL to production domain
# 4. IMPORTANT: Clean up mock data first!
#    Run: supabase/migrations/cleanup_mock_data.sql
# 5. Deploy
#
# ============================================
# CEO Demo Notes (Jan 5, 2026)
# ============================================
# Pre-Demo Checklist:
# ✅ Set ENABLE_SECTIGO_MOCK=false in production
# ✅ Use real Sectigo credentials
# ✅ Clean up all mock data from database
# ✅ Verify all API calls work end-to-end
# ✅ Test create client → create ACME account → add domain flow
# ✅ Check transaction recording
# ✅ Verify no "MOCK_" prefixes in UI
# ✅ Backup database before demo
